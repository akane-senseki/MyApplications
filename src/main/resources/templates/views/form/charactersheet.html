<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
    <div class="cs_form" th:fragment="registForm(charactersheet)">
        <div class="cs_form_container">
            <div class="cs_form_item">
                <label for="cs_img">画像をアップロード</label><br />
                <input type="file" name="cs_img" id="cs_img" accept=".png,.jpg,.jpeg">
                <th:block th:if="${pc.img_path == null}">
                <img id="preview" src="/myapplications/images/defo/noimage.png" alt="cs_img"/>
                </th:block>
                <th:block th:unless="${pc.img_path == null}">
                <img id="preview" th:src="@{/images/{id}/{img_path}(id=${pc.user.id},img_path=${pc.img_path})}" alt="cs_img"/>
                </th:block>
                <script type="text/javascript">
//画像をプレビューする
    function previewFile(file){
        const reader = new FileReader();

        reader.onload = function(e){
            const imageUrl = e.target.result; //画像のurlの呼び出し
            document.getElementById('preview').src = imageUrl;
        }
        //ファイルを読み込む
        reader.readAsDataURL(file);
    }

    //<input>でファイルが選択されたときの処理
    const fileInput = document.getElementById('cs_img');
    const handleFileSelect = () => {
        const files = fileInput.files;
        previewFile(files[0]);
    }
    fileInput.addEventListener('change', handleFileSelect);



</script>
            </div>
            <div class="cs_form_item right">
                <br /> <br /> <label for="name">名前</label><br />
                <input type="text" id="cs_name" name="name" th:value="${pc.name}"/> <br /> <br />
                <label for="name_ruby">ふりがな</label><br />
                <input type="text" id="cs_name_ruby" name="name_ruby" th:value="${pc.name_ruby}" /> <br /> <br />
            </div>
        </div>
        <div class="ability_form">
            <p>能力値</p>
            <table>
                <tbody>
                    <tr>
                        <th><label for="str">STR</label></th>
                        <th><label for="con">CON</label></th>
                        <th><label for="dex">DEX</label></th>
                        <th><label for="siz">SIZ</label></th>
                        <th>HP</th>
                        <th>DB</th>
                    </tr>
                    <tr>
                        <td><input type="number" name="str" id="str" onkeyup="show()" th:value="${pc.str}"/></td>
                        <td><input type="number" name="con" id="con" onkeyup="show()" th:value="${pc.con}"/></td>
                        <td><input type="number" name="dex" id="dex" onkeyup="show()" th:value="${pc.dex}"/></td>
                        <td><input type="number" name="siz" id="siz" onkeyup="show()" th:value="${pc.siz}"/></td>
                        <td id="hp">--</td>
                        <td id="db">--</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <script>

</script>
        <br /> <br />
        <div class="skill_form">
            <p>技能値</p>
            <table>
                <tbody>
                    <tr>
                        <th>&nbsp;&nbsp;&nbsp;&nbsp;</th>
                        <th>初期値</th>
                        <th>振分け</th>
                        <th>合計</th>
                    </tr>
                    <tr>
                        <th>回避</th>
                        <td id="dex_2"></td>
                        <td><input type="number" name="avoidance_add" id="avoidance_add" class="input_min" onkeyup="show()" th:value="${pc.avoidance_add}" /></td>
                        <td id="avoidance"></td>
                    </tr>
                    <tr>
                        <th>キック</th>
                        <td>25</td>
                        <td><input type="number" name="kick_add" id="kick_add" class="input_min" onkeyup="show_kick()" th:value="${pc.kick_add}" /></td>
                        <td id="kick"></td>
                    </tr>
                    <tr>
                        <th>こぶし</th>
                        <td>50</td>
                        <td><input type="number" name="fist_add" id="fist_add" class="input_min" onkeyup="show_fist()" th:value="${pc.fist_add}" /></td>
                        <td id="fist"></td>
                    </tr>
                    <tr>
                        <th>頭突き</th>
                        <td>10</td>
                        <td><input type="number" name="headbutt_add" id="headbutt_add" class="input_min" onkeyup="show_headbutt()" th:value="${pc.headbutt_add}" /></td>
                        <td id="headbutt"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <input type="radio" name="release_flag" value="0"/>公開
        <input type="radio" name="release_flag" value="1"/>非公開
        <input type="hidden" name="token" th:value="${pc.token}" />
        <button type="submit" id="cs_submit">アップロード</button>
    </div>
</body>
</html>