<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{views/layout/app :: layout(~{::body/content()})}">
<head>
</head>
<body>
    <div class="cs_index_wrapper">
    <h2 th:if="${flush != null}" id="flush_message" th:text="${flush}"></h2>
         <th:block th:if="${session.login_user != null}">
            <a class="cs_new" th:href="@{/cs/new}">新規登録</a>
            <a class="cs_new" th:href="@{/cs/user}">自分のキャラシを見る</a>
         </th:block>
         <th:block th:unless="${session.login_user != null}">
            <a class="cs_new" href="#">ログインして登録する</a>
            <a class="cs_new" href="#">アカウントを作成して登録する</a>
         </th:block>
        <th:block th:if="${pc != null}">
            <div class="cs_index_list">
                <div class="cs_index_container" th:each="pc : ${pc}" th:object="${pc}"><!-- ここも繰り返される -->
                    <!-- th:objectを指定しておくことで*{}で中身を取り出すことが出来る。 -->
                    <div class="item">
                    <th:block th:if="*{imgPath != null}">
                        <img th:src="@{/images/{id}/{img_path}(id=*{user.id},img_path=*{imgPath})}" />
                    </th:block>
                     <th:block th:unless="*{imgPath != null}">
                        <img src="/myapplications/images/defo/noimage.png" />
                    </th:block>
                    </div>
                    <div class="item">
                        <p th:text="*{name}"></p>
                        <p th:text="*{#dates.format(updateDate , 'yyyy-MM-dd')}"></p>
                        <a class="cs_show" th:href="@{/cs/show(id=*{id})}">観覧</a>
                        <a class="cs_edit" th:href="@{/cs/edit(id=*{id})}">編集</a>
                    </div>
                </div>
            </div>
        </th:block>
    </div>
</body>
</html>